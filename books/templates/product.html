{% extends 'base.html' %}

{% block content %}

this is about product - {{ product.name}}
<br>

<img src="{{ product.image.url }}">

<br>
{% if product.is_sale %}
    <s> {{ product.price }} </s>
    <br>
    {{ product.sale_price }}
    
{% else %}
<br>
    {{ product.price }}
{% endif %}
<br>

<button type="button" value="{{ product.id }}" class="btn btn-outline-dark" id="add-cart">
    Add to cart
</button>

<script>

    $(document).on('click', '#add-cart', 
    function(e) {
        e.preventDefault();
        $.ajax({
            type : "POST",
            url : "{% url 'cart_add' %}",
            data : {
                product_id : $('#add-cart').val(),
                csrfmiddlewaretoken : '{{ csrf_token }}',
                action : 'post'
            },

            success : function(json) {
                console.log(json)
            },

            error : function(xhr, errmsg, err) {

            }
        })
    }


    )
</script>

{% endblock %}